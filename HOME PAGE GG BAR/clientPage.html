<html>
   <head>
      <meta charset="UTF-8" />
      <link rel="stylesheet" href="resources/css/bootstrap.min.css" />
      <script src="resources/js/jquery.min.js"></script>
      <script src="resources/js/bootstrap.min.js"></script>


      <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <meta charset="utf-8" />
      <meta name="keywords" content="" />
      <meta name="description" content="" />
      <title>Página Inicial</title>
      <link rel="stylesheet" href="nicepage.css" media="screen" />
      <link rel="stylesheet" href="Página-Inicial.css" media="screen" />
      <script
         class="u-script"
         type="text/javascript"
         src="jquery.js"
         defer=""
      ></script>
      <script
         class="u-script"
         type="text/javascript"
         src="nicepage.js"
         defer=""
      ></script>
      <meta name="generator" content="Nicepage 6.3.1, nicepage.com" />
      <link
         id="u-theme-google-font"
         rel="stylesheet"
         href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,500,500i,600,600i,700,700i,800,800i"
      />
      <link
         id="u-page-google-font"
         rel="stylesheet"
         href="https://fonts.googleapis.com/css?family=Montserrat:100,100i,200,200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i"
      />

      <script type="application/ld+json">
         {
            "@context": "http://schema.org",
            "@type": "Organization",
            "name": "",
            "logo": "images/logo.jpg"
         }
      </script>
      <meta name="theme-color" content="#478ac9" />
      <meta property="og:title" content="Página Inicial" />
      <meta property="og:type" content="website" />
      <meta data-intl-tel-input-cdn-path="intlTelInput/" />


   </head>

   <body
   data-home-page="Página-Inicial.html"
   data-home-page-title="Página Inicial"
   data-path-to-root="./"
   data-include-products="false"
   class="u-body u-xl-mode"
   data-lang="pt"
   >
      
   
   <header class="u-clearfix u-header u-header" id="sec-db0e">
      <div class="u-clearfix u-sheet u-sheet-1">
         <a
            class="u-image u-logo u-image-1"
            data-image-width="150"
            data-image-height="150"
         >
            <img src="logo.jpg" class="u-logo-image u-logo-image-1" />
         </a>
         <nav class="u-menu u-menu-one-level u-offcanvas u-menu-1">
            <div class="u-custom-menu u-nav-container">
               <ul class="u-nav u-spacing-20 u-unstyled u-nav-1">
                  <li class="u-nav-item">
                     <a
                        class="u-button-style u-nav-link u-text-active-black u-text-black u-text-hover-palette-2-base"
                        href="Página-Inicial.html"
                        style="padding: 10px 40px"
                        >Página Inicial</a
                     >
                  </li>
               </ul>
            </div>
            <div class="u-custom-menu u-nav-container-collapse">
               <div
                  class="u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav"
               >
                  <div class="u-inner-container-layout u-sidenav-overflow">
                     <div class="u-menu-close"></div>
                     <ul
                        class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"
                     >
                        <li class="u-nav-item">
                           <a
                              class="u-button-style u-nav-link"
                              href="Página-Inicial.html"
                              >Página Inicial</a
                           >
                        </li>
                     </ul>
                  </div>
               </div>
               <div
                  class="u-black u-menu-overlay u-opacity u-opacity-70"
               ></div>
            </div>
         </nav>
      </div>
   </header>
   
   
   <!--<nav class="navbar navbar-default">
         <div class="container-fluid">
            <div class="navbar-header">
               <button
                  type="button"
                  class="navbar-toggle collapsed"
                  data-toggle="collapse"
                  data-target="#navbar"
                  aria-expanded="false"
                  aria-controls="navbar"
               >
                  <span class="sr-only">Toggle navigation</span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
               </button>
               <a class="navbar-brand" href="#">Sistema de Cadastro Unico</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
               <ul class="nav navbar-nav">
                  <li>
                     <a href="vendas.html">Vendas</a>
                  </li>
                  <li>
                     <a href="Estoque.html">Estoque</a>
                  </li>
                  <li>
                     <a href="Estoque.html">Contatos</a>
                  </li>
               </ul>
            </div>
         </div>
      </nav> -->
      <div class="container">
         <div class="modal fade" id="myModal" role="dialog">
            <div class="modal-dialog">
               <div class="panel panel-default">
                  <div class="panel-heading">
                     <h3 class="panel-title text-center">
                        CADASTRO DE CLIENTE
                     </h3>
                  </div>

                  <div class="panel-body">
                     <form action="#" class="form-horizontal">
                        <fieldset>
                           <legend>Dados Pessoais</legend>
                           <div class="form-group">
                              <label
                                 for="Documento"
                                 class="col-sm-2 control-label"
                                 >N° de identificação</label
                              >
                              <div class="col-sm-4">
                                 <input
                                    type="text"
                                    class="form-control"
                                    id="Documento"
                                 />
                              </div>
                           </div>

                           <div class="form-group">
                              <label for="nome" class="col-sm-2 control-label"
                                 >Nome</label
                              >
                              <div class="col-sm-4">
                                 <input
                                    type="text"
                                    class="form-control"
                                    id="nome"
                                 />
                              </div>
                           </div>

                           <div class="form-group">
                              <label class="col-sm-2 control-label">Sexo</label>
                              <div class="col-sm-4">
                                 <label class="radio-inline">
                                    <input
                                       type="radio"
                                       name="sexo"
                                       value="FEMININO"
                                    />
                                    Feminino
                                 </label>

                                 <label class="radio-inline">
                                    <input
                                       type="radio"
                                       name="sexo"
                                       value="MASCULINO"
                                    />
                                    Masculino
                                 </label>
                              </div>
                           </div>
                        </fieldset>

                        <fieldset>
                           <legend>Contato</legend>
                           <div class="form-group">
                              <label for="email" class="col-sm-2 control-label"
                                 >Email</label
                              >
                              <div class="col-sm-4">
                                 <input
                                    type="email"
                                    class="form-control"
                                    id="email"
                                 />
                              </div>
                           </div>

                           <div class="form-group">
                              <label
                                 for="telefone"
                                 class="col-sm-2 control-label"
                                 >Telefone</label
                              >
                              <div class="col-sm-4">
                                 <input
                                    type="tel"
                                    class="form-control"
                                    id="telefone"
                                 />
                              </div>
                           </div>
                           
                        </fieldset>

                        <button
                           type="button"
                           class="btn btn-primary"
                           onclick="javascript:SalvarCadastro();"
                        >
                           <span
                              class="glyphicon glyphicon-floppy-disk"
                              aria-hidden="true"
                           ></span>
                           Gravar
                        </button>
                     </form>
                  </div>
               </div>
            </div>
         </div>
         <div class="panel panel-default">
            <div class="panel-heading">
               <h3 class="panel-title text-center">Clientes cadastrados</h3>
            </div>

            <div class="panel-body">
               <a
                  data-toggle="modal"
                  data-target="#myModal"
                  class="btn btn-primary"
               >
                  <span
                     class="glyphicon glyphicon-plus"
                     aria-hidden="true"
                  ></span>
                  Adicionar cliente 
               </a>
               <div class="table-responsive">
                  <table
                     id="ListaCadastro"
                     class="table table-striped table-hover"
                  >
                     <thead>
                        <tr>
                           <th>N° de identificação</th>
                           <th>Nome</th>
                           <th>Email</th>
                           <th>Telefone</th>
                           <th>Data de cadastro</th>
                           <th>Tipo de cliente</th>
                        </tr>
                     </thead>
                  </table>
               </div>
            </div>
         </div>
      </div>

      <script>
         ListarClientes();

         function SalvarCadastro() {
            var Clientes = {};

            Clientes.documento = $("#Documento").val();
            Clientes.nome = $("#nome").val();
            Clientes.email = $("#email").val();
            Clientes.telefone = $("#telefone").val();
            Clientes.fax = $("#fax").val();
            Clientes.uf = $("#uf").val();
            Clientes.sexo = $('input[name="sexo"]:checked').val();

            var validar = 1;

            if (Clientes.documento == "") {
               validar = 0;
               alert("O campo documento é obrigatório");
               $("#Documento").css("background-color", "red");
            }

            if (Clientes.nome == "") {
               alert("O campo Nome é obrigatório");
               $("#nome").css("background-color", "red");
               s;
               validar = 0;
            }

            if (validar == 1) {
               /*{
               $.ajax({
                  type: "POST",
                  url: "https://localhost:44352/api/Clientes/Salvar",
                  data: JSON.stringify(Clientes),
                  contentType: "application/json; charset=utf-8",
                  dataType: "json",
                  success: function (msg) {
                     alert("Sucesso!");
                     location.reload();
                  },
                  error: function (msg) {
                     alert("error");
                  },
               });*/
               AdicionarLinhaTabela(
                  Clientes.documento,
                  Clientes.nome,
                  Clientes.email,
                  Clientes.telefone
               );
               LimparCamposForm();
            }
         }

         function AdicionarLinhaTabela(Documento, Nome, Email, Telefone) {
            var linhaNova = '<tr id="Linha' + Documento + '"><td>';
            linhaNova =
               linhaNova +
               Documento +
               "</td><td>" +
               Nome +
               "</td><td>" +
               Email +
               "</td><td>" +
               Telefone +
               '</td><td><a href="#" onclick="javascript:GetCliente(' +
               Documento +
               ');"  class="btn btn-info"><span class="glyphicon glyphicon-edit" aria-hidden="true"></span> Editar</a><a href="#" onclick="javascript:RemoveLinha(' +
               Documento +
               ');" class="btn btn-danger"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span> Excluir</a></td></tr>';

            alert(linhaNova);
            $("#ListaCadastro").prepend(linhaNova); //prepend joga o novo registro no começo, o append é no final
            //a linha de cima ta inserindo um registro html através de uma função JS
            $("#myModal").modal().hide();
         }

         function LimparCamposForm() {
            $("#Documento").val("");
            $("#nome").val("");
            $("#email").val("");
            $("#telefone").val("");
            $("#fax").val("");
         }

         function RemoveLinha(Documento) {
            $("#Linha" + Documento).remove();
         }

         function ListarClientes() {
            $.ajax({
               type: "GET",
               url: "https://localhost:44352/api/Clientes/Listar",
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               success: function (OBJ) {
                  alert(OBJ[0].nome);

                  alert("Sucesso!");
               },
               error: function (OBJ) {
                  alert("error");
               },
            });
         }

         function GetCliente(Documento) {
            $.ajax({
               type: "GET",
               url:
                  "https://localhost:44352/api/Clientes/GetCliente?Documento=" +
                  Documento,
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               success: function (OBJ) {
                  $("#myModal").modal().show();

                  $("#Documento").val(OBJ.documento);
                  $("#nome").val(OBJ.nome);
                  $("#email").val(OBJ.email);
                  $("#telefone").val(OBJ.telefone);
                  $("#fax").val(OBJ.fax);
                  $("#uf").val(OBJ.uf);

                  //SalvarCadastro();
               },
               error: function (OBJ) {
                  alert("error");
               },
            });
         }

         function ListarClientes() {
            $.ajax({
               type: "GET",
               url: "https://localhost:44352/api/Clientes/Listar",
               contentType: "application/json; charset=utf-8",
               dataType: "json",
               success: function (OBJ) {
                  for (var i = 0; i < OBJ.length; i++) {
                     AdicionarLinhaTabela(
                        OBJ[i].documento,
                        OBJ[i].nome,
                        OBJ[i].email,
                        OBJ[i].telefone
                     );
                  }
               },
               error: function (OBJ) {
                  alert("error");
               },
            });
         }
      </script>
   </body>
</html>
